---
import ColorPaletteButton from "src/components/ColorPaletteButton.svelte";
import BaseHover from "src/components/BaseHover.astro";
import type { ColorPaletteSetting } from "src/stores/color-palette";
import { polyfillOklch, calcColorFunctions } from "src/logic/color";
import { DEFAULT_COLOR_PALETTE } from "src/logic/color-palette-default";

interface PrebuildColorPalette extends ColorPaletteSetting {
  name: string
}

const prebuiltColorPalettes: PrebuildColorPalette[] = [
  {
    name: "Red",
    one: {
      mode: "oklch",
      l: 0.5766,
      c: 0.195,
      h: 23.81,
    },
    two: {
      mode: "oklch",
      l: 0.562,
      c: 0.165,
      h: 8.58,
    },
  },
  {
    name: "Orange",
    one: {
      mode: "oklch",
      l: 0.6926,
      c: 0.191,
      h: 44.02,
    },
    two: {
      mode: "oklch",
      l: 0.6458,
      c: 0.172,
      h: 32.27,
    },
  },
  {
    name: "Yellow",
    one: {
      mode: "oklch",
      l: 0.8222,
      c: 0.169,
      h: 80.91,
    },
    two: {
      mode: "oklch",
      l: 0.8775,
      c: 0.166,
      h: 93.16,
    },
  },
  {
    name: "Green",
    one: {
      mode: "oklch",
      l: 0.5676,
      c: 0.138,
      h: 148.33,
    },
    two: {
      mode: "oklch",
      l: 0.566,
      c: 0.148,
      h: 122.67,
    },
  },
  {
    name: "Cyan",
    one: {
      mode: "oklch",
      l: 0.6967,
      c: 0.122,
      h: 217.58,
    },
    two: {
      mode: "oklch",
      l: 0.6796,
      c: 0.109,
      h: 196.34,
    },
  },
  {
    name: "Blue",
    ...DEFAULT_COLOR_PALETTE as ColorPaletteSetting,
  },
  {
    name: "Purple",
    one: {
      mode: "oklch",
      l: 0.6138,
      c: 0.179,
      h: 296.66,
    },
    two: {
      mode: "oklch",
      l: 0.5898,
      c: 0.172,
      h: 276.38,
    },
  },
];
---

<div class="px-2 py-1 flex flex-row gap-2 items-center">
  {
    prebuiltColorPalettes.map((color, index) => (
      <BaseHover>
        <ColorPaletteButton
          slot="handle"
          client:idle
          palette={color}
          title={color.name}
        />
        <div
          slot="content"
          class="px-1.5 py-1 rounded text-sm"
          style={{
            "color": `rgba(${polyfillOklch(calcColorFunctions.light.back(color.two))})`,
            "background-color": `rgba(${polyfillOklch(calcColorFunctions.light.front(color.two))})`,
          }}
        >
          <span>{color.name}</span>
        </div>
      </BaseHover>
    ))
  }
</div>
