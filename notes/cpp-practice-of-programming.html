<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="apple-touch-icon" href="/pwa-192x192.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00aba9"><meta name="msapplication-TileColor" content="#00aba9"><meta name="theme-color" content="#ffffff"><script type="module" async="" crossorigin="" src="/assets/app.809341bf.js"></script><link rel="modulepreload" href="/assets/vendor.68320762.js"><style>button[data-v-206fdd9c]{padding:.25rem;font-size:1.125rem;line-height:1.75rem;color:var(--color-accent)}button[data-v-206fdd9c]:hover{color:var(--color-secondary)}#app{display:grid;grid-template-rows:auto 1fr auto;grid-template-columns:100%;margin-left:1rem;margin-right:1rem;height:100%}@media (min-width:1024px){#app{margin-left:0;margin-right:0}}*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}button{font-family:inherit;font-size:100%;line-height:inherit;color:inherit;margin:0;padding:0}button{text-transform:none}button{-webkit-appearance:button;background-color:transparent;background-image:none}h1,h2,h3,hr,p,pre{margin:0}ol,ul{list-style:none;margin:0;padding:0}button{cursor:pointer}svg{display:block;vertical-align:middle}.my-4{margin-top:1rem;margin-bottom:1rem}.mb-8{margin-bottom:2rem}.mt-4{margin-top:1rem}.inline-block{display:inline-block}.flex{display:flex}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{grid-gap:.25rem;gap:.25rem}.gap-2{grid-gap:.5rem;gap:.5rem}.gap-3{grid-gap:.75rem;gap:.75rem}.gap-x-1{grid-column-gap:.25rem;column-gap:.25rem}.gap-y-0\.5{grid-row-gap:.125rem;row-gap:.125rem}.rounded{border-radius:.25rem}.bg-acc,.hover\:bg-acc:hover{background-color:var(--color-accent)}.hover\:bg-sec:hover{background-color:var(--color-secondary)}.px-2{padding-left:.5rem;padding-right:.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.text-left{text-align:left}.font-mono{font-family:var(--font-mono)}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.hover\:text-acc:hover,.text-acc{color:var(--color-accent)}.hover\:text-bgd:hover,.text-bgd{color:var(--color-background)}.text-sec{color:var(--color-secondary)}.ring-2{--un-ring-offset-shadow:0 0 #0000;--un-ring-shadow:0 0 #0000;--un-shadow-inset:var(--un-empty, );/*!*//*!*/--un-shadow:0 0 #0000;--un-ring-inset:var(--un-empty, );/*!*//*!*/--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5)}.ring-2{--un-ring-width:2px;--un-ring-offset-shadow:var(--un-ring-inset) 0 0 0 var(--un-ring-offset-width) var(--un-ring-offset-color);--un-ring-shadow:var(--un-ring-inset) 0 0 0 calc(var(--un-ring-width) + var(--un-ring-offset-width)) var(--un-ring-color);box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow,0 0 #0000)}.ring-acc{--un-ring-color:var(--color-accent)}.ring-fgd{--un-ring-color:var(--color-foreground)}.ring-sec{--un-ring-color:var(--color-secondary)}.ring-inset{--un-ring-inset:inset}:root{--color-accent:#003A70;--color-secondary:#61649f;--color-background:#F5F5F5;--color-foreground:#1D252D;--color-dim:#737C7B;--font-sans:"Noto Sans","SF Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Avenir Next","Helvetica Neue",sans-serif;--font-serif:"Noto Serif","New York","Roboto Slab",Cambria,Georgia,Times,"Times New Roman",serif;--font-mono:"JetBrains Mono","SF Mono","Roboto Mono",Menlo,"Cascadia Code",Consolas,monospace}html{height:100%;margin:0;padding:0;text-align:center;font-size:1rem;line-height:1.5rem;overflow:auto;overflow:overlay;background-color:var(--color-background);color:var(--color-foreground);font-family:var(--font-sans)}html:not(.dark) .shiki-dark{display:none}body{height:100%;margin:auto;padding:0;max-width:75ch}svg{width:1.25em;height:1.25em;display:inline;vertical-align:sub}h1{font-size:1.875rem;line-height:2.25rem;font-weight:700}button{outline:2px solid transparent!important;outline-offset:2px!important}.transition-lively,button{-webkit-transition-property:background-color,border-color,color,fill,stroke,opacity,-webkit-box-shadow,-webkit-transform,filter,backdrop-filter;-o-transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,-webkit-box-shadow,transform,-webkit-transform,filter,backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,1,1);-o-transition-timing-function:cubic-bezier(.4,0,1,1);transition-timing-function:cubic-bezier(.4,0,1,1);-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}.transition-lively:hover,button:hover{-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);-o-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);-webkit-transition-duration:.3s;-o-transition-duration:.3s;transition-duration:.3s}#md a{text-decoration-skip-ink:auto;color:var(--color-accent);transition:all .2s ease-in}#md a:hover{color:var(--color-secondary);transition:all .3s ease-out}#md em{padding-right:.25ch}#md h2,#md h3{margin:1.25em 0 .75em;font-family:var(--font-serif);font-weight:700}#md h2{font-size:1.5em}#md h3{font-size:1.25em}#md p{margin:1em 0}#md h2:first-child,#md h3:first-child,#md p:first-child,#md pre:first-child{margin-top:0}#md h2:last-child,#md h3:last-child,#md p:last-child,#md pre:last-child{margin-bottom:0}#md a{text-decoration:underline;text-decoration-skip-ink:auto}#md hr{border:0;height:0;border-bottom:1px solid var(--color-foreground)}#md hr.talk-separator{height:1.5em;border:none;overflow:visible;text-align:center}#md hr.talk-separator:after{position:relative;content:"***";letter-spacing:.5em;background:0 0}#md hr.talk-separator+h2{margin-top:0}#md ol,#md ul{margin:1em 0;padding-left:1em}#md ul{list-style:disc}#md ol{list-style:decimal}#md li{line-height:150%;margin:.25em 0}#md pre pre{border-radius:.25rem;padding:1em;max-width:100%;overflow:auto}#md p code{font-size:.95rem;padding:.2em}#md code,#md pre{font-family:var(--font-mono);line-height:154%}#md pre{margin:1em 0}</style><link rel="preload" href="/assets/app.c495ff01.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/cpp-practice-of-programming.41585db0.js"><link rel="preload" href="/assets/cpp-practice-of-programming.9021f1c0.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/TheArticle.93f49851.js"><link rel="preload" href="/assets/TheArticle.25f0d059.css" as="style"><title>程设 C++ 笔记 | Pak</title><meta name="description" content="程设课的 C++ 笔记。上半学期是语法及 STL，下半学期是算法基础。"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous"><meta name="head:count" content="2"></head><body><div id="app" data-server-rendered="true"><!--[--><header class="flex justify-between items-center my-4 gap-2" data-v-206fdd9c=""><nav class="inline-block px-2 py-1 rounded bg-acc text-bgd font-bold transition-lively hover:(bg-sec)" data-v-206fdd9c=""><a href="/" class="" data-v-206fdd9c="">Pak</a></nav><nav class="flex justify-between items-center gap-3" data-v-206fdd9c=""><button data-v-206fdd9c=""><a href="/archive" class="" data-v-206fdd9c=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-206fdd9c=""><path d="M14 17H7v-2h7m3-2H7v-2h10m0-2H7V7h10m2-4H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z" fill="currentColor"></path></svg></a></button><button data-v-206fdd9c=""><a href="/posts" class="" data-v-206fdd9c=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-206fdd9c=""><path d="M13 9V3.5L18.5 9M6 2c-1.11 0-2 .89-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6z" fill="currentColor"></path></svg></a></button><button data-v-206fdd9c=""><a href="/sheets" class="" data-v-206fdd9c=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-206fdd9c=""><path d="M4 3h16a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v3h4V7H4m6 0v3h4V7h-4m10 3V7h-4v3h4M4 12v3h4v-3H4m0 8h4v-3H4v3m6-8v3h4v-3h-4m0 8h4v-3h-4v3m10 0v-3h-4v3h4m0-8h-4v3h4v-3z" fill="currentColor"></path></svg></a></button><button data-v-206fdd9c=""><a href="/notes" class="" data-v-206fdd9c=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-206fdd9c=""><path d="M14 10V4.5l5.5 5.5M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9l-6-6H5z" fill="currentColor"></path></svg></a></button></nav></header><main class="text-left"><main class="mb-8"><article class="text-left"><!--[--><header class="flex flex-col justify-start items-start gap-2 mt-4 mb-8"><h1>程设 C++ 笔记</h1><div class="flex flex-wrap gap-x-1 gap-y-0.5 justify-start items-center"><span class="flex justify-center text-lg"><a href="/notes" class=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="transition-lively hover:text-acc"><path d="M14 10V4.5l5.5 5.5M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9l-6-6H5z" fill="currentColor"></path></svg></a></span><span class="flex gap-1 justify-center items-center"><span class="inline-block text-xs rounded px-2 py-1 font-mono font-bold transition-lively ring-inset ring-2 ring-fgd"><!--[--><time>06/26/2021</time><!--]--></span><span class="inline-block text-xs rounded px-2 py-1 font-mono font-bold transition-lively ring-inset ring-2 ring-fgd"><!--[-->zh-Hans<!--]--></span></span><span class="flex gap-1 justify-center items-center"><span class="inline-block text-xs rounded px-2 py-1 font-mono font-bold transition-lively ring-inset ring-2 ring-acc text-acc hover:bg-acc hover:text-bgd"><!--[--><a href="/categories/comp" class="">Computer</a><!--]--></span></span><span class="flex gap-1 justify-center items-center"><!--[--><span class="inline-block text-xs rounded px-2 py-1 font-mono font-bold transition-lively ring-inset ring-2 ring-sec text-sec hover:bg-sec hover:text-bgd"><!--[--><a href="/tags?tag=cpp" class=""> @cpp</a><!--]--></span><span class="inline-block text-xs rounded px-2 py-1 font-mono font-bold transition-lively ring-inset ring-2 ring-sec text-sec hover:bg-sec hover:text-bgd"><!--[--><a href="/tags?tag=pl" class=""> @pl</a><!--]--></span><!--]--></span><span class="flex gap-1 justify-center items-center"><!--[--><!--]--></span></div></header><section id="md"><div><p>程设课的 C++ 笔记。上半学期是语法及 STL，下半学期是算法基础。</p><!-- more --><h2 id="函数及其类型" tabindex="-1">函数及其类型</h2><h3 id="c-11-lambda-表达式作为返回值" tabindex="-1">C++ 11 lambda 表达式作为返回值</h3><p>C++ 提供了 <code>auto</code> 关键字作自动类型推断，但在 C++ 11 中不能自动推断函数的返回值类型，必须通过 <code>decltype()</code> 指明。而 lambda 表达式没有具名类型，因此需要通过包装在<strong>函数对象</strong>（<code>function</code>）中来解决。</p><pre><code class="language-cpp"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#5e81ac;font-weight:700">#</span><span style="color:#81a1c1">include</span><span style="color:#5e81ac"> </span><span style="color:#eceff4">&lt;</span><span style="color:#a3be8c">functional</span><span style="color:#eceff4">&gt;</span><span style="color:#5e81ac"> </span><span style="color:#616e88">// `std::function` 在 &lt;functional&gt; 头文件里</span></span>
<span class="line"><span style="color:#81a1c1">using</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">namespace</span><span style="color:#d8dEE9FF"> std</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">function</span><span style="color:#eceff4">&lt;</span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> (</span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF">)</span><span style="color:#eceff4">&gt;</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">foo</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">a</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#81a1c1">return</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">[</span><span style="color:#81a1c1">=</span><span style="color:#eceff4">](</span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">b</span><span style="color:#eceff4">){</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">return</span><span style="color:#d8dEE9FF"> a </span><span style="color:#81a1c1">+</span><span style="color:#d8dEE9FF"> b</span><span style="color:#81a1c1">;</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">}</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#eceff4">}</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code><span class="line"><span style="color:#cf222e">#include</span><span style="color:#24292f"> </span><span style="color:#0a3069">&lt;functional&gt;</span><span style="color:#24292f"> </span><span style="color:#6e7781">// `std::function` 在 &lt;functional&gt; 头文件里</span></span>
<span class="line"><span style="color:#cf222e">using</span><span style="color:#24292f"> </span><span style="color:#cf222e">namespace</span><span style="color:#24292f"> </span><span style="color:#953800">std</span><span style="color:#24292f">;</span></span>
<span class="line"><span style="color:#953800">function</span><span style="color:#24292f">&lt;</span><span style="color:#cf222e">int</span><span style="color:#24292f"> (</span><span style="color:#cf222e">int</span><span style="color:#24292f">)&gt; </span><span style="color:#8250df">foo</span><span style="color:#24292f">(</span><span style="color:#cf222e">int</span><span style="color:#24292f"> </span><span style="color:#953800">a</span><span style="color:#24292f">) {</span></span>
<span class="line"><span style="color:#24292f">    </span><span style="color:#cf222e">return</span><span style="color:#24292f"> [</span><span style="color:#cf222e">=</span><span style="color:#24292f">](</span><span style="color:#cf222e">int</span><span style="color:#24292f"> </span><span style="color:#953800">b</span><span style="color:#24292f">){ </span><span style="color:#cf222e">return</span><span style="color:#24292f"> a </span><span style="color:#cf222e">+</span><span style="color:#24292f"> b; };</span></span>
<span class="line"><span style="color:#24292f">}</span></span>
<span class="line"></span></code></pre></div></code></pre><p><code>function&lt;&gt;</code> 类模板接收一个参数，函数的类型。仿照普通函数的类型（<code>return_type(arg_type,...)</code>）写即可。</p><p>当然，在 C++ 14 及以后可以直接写成：</p><pre><code class="language-cpp"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81a1c1">auto</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">foo</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">a</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#81a1c1">return</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">[</span><span style="color:#81a1c1">=</span><span style="color:#eceff4">](</span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">b</span><span style="color:#eceff4">){</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">return</span><span style="color:#d8dEE9FF"> a </span><span style="color:#81a1c1">+</span><span style="color:#d8dEE9FF"> b</span><span style="color:#81a1c1">;</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">}</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#eceff4">}</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code><span class="line"><span style="color:#cf222e">auto</span><span style="color:#24292f"> </span><span style="color:#8250df">foo</span><span style="color:#24292f">(</span><span style="color:#cf222e">int</span><span style="color:#24292f"> </span><span style="color:#953800">a</span><span style="color:#24292f">) {</span></span>
<span class="line"><span style="color:#24292f">    </span><span style="color:#cf222e">return</span><span style="color:#24292f"> [</span><span style="color:#cf222e">=</span><span style="color:#24292f">](</span><span style="color:#cf222e">int</span><span style="color:#24292f"> </span><span style="color:#953800">b</span><span style="color:#24292f">){ </span><span style="color:#cf222e">return</span><span style="color:#24292f"> a </span><span style="color:#cf222e">+</span><span style="color:#24292f"> b; };</span></span>
<span class="line"><span style="color:#24292f">}</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="函数指针" tabindex="-1">函数指针</h3><p>一个参数表是 <code>(int, int)</code>，返回值是 <code>void</code> 的函数，它的指针类型写作 <code>void(*)(int, int)</code>。如果函数的形参是函数指针类型，需要写成：</p><pre><code class="language-cpp"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81a1c1">void</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">foo</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">void</span><span style="color:#eceff4">(*</span><span style="color:#d8dee9">fun</span><span style="color:#eceff4">)(</span><span style="color:#81a1c1">int</span><span style="color:#eceff4">,</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">int</span><span style="color:#eceff4">))</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{}</span><span style="color:#616e88"> // &lt;- 形参名 fun 在类型的里面！</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code><span class="line"><span style="color:#cf222e">void</span><span style="color:#24292f"> </span><span style="color:#8250df">foo</span><span style="color:#24292f">(</span><span style="color:#cf222e">void</span><span style="color:#24292f">(*</span><span style="color:#953800">fun</span><span style="color:#24292f">)(</span><span style="color:#cf222e">int</span><span style="color:#24292f">, </span><span style="color:#cf222e">int</span><span style="color:#24292f">)) {}</span><span style="color:#6e7781"> // &lt;- 形参名 fun 在类型的里面！</span></span>
<span class="line"></span></code></pre></div></code></pre><p>当然，可以使用函数模板：</p><pre><code class="language-cpp"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#81a1c1">template</span><span style="color:#eceff4">&lt;</span><span style="color:#81a1c1">class</span><span style="color:#d8dEE9FF"> F</span><span style="color:#eceff4">&gt;</span></span>
<span class="line"><span style="color:#81a1c1">void</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">foo</span><span style="color:#eceff4">(</span><span style="color:#d8dEE9FF">F </span><span style="color:#d8dee9">fun</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{}</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code><span class="line"><span style="color:#cf222e">template</span><span style="color:#24292f">&lt;</span><span style="color:#cf222e">class</span><span style="color:#24292f"> </span><span style="color:#953800">F</span><span style="color:#24292f">&gt;</span></span>
<span class="line"><span style="color:#cf222e">void</span><span style="color:#24292f"> </span><span style="color:#8250df">foo</span><span style="color:#24292f">(</span><span style="color:#953800">F</span><span style="color:#24292f"> </span><span style="color:#953800">fun</span><span style="color:#24292f">) {}</span></span>
<span class="line"></span></code></pre></div></code></pre><hr class="talk-separator"><h2 id="构造函数" tabindex="-1">构造函数</h2><h3 id="复制构造函数" tabindex="-1">复制构造函数</h3><p>形如 <code>C(const C&amp; a)</code> 的构造函数。在没有声明的情况下，编译器会自动生成一个，执行按位拷贝（<strong>浅拷贝</strong>）。在以下三种情况会调用：</p><ul><li>使用另一个同类对象初始化</li><li>初始化函数的形参</li><li>函数以值的形式返回对象*</li></ul><p>C++ 17 及以上要求实现返回值优化，如果返回值是纯右值（一个直接调用构造函数生成的临时对象），不会执行复制构造函数。此外还有具名返回值优化，可以参考<a href="https://www.zhihu.com/question/443571654/answer/1723219351" target="_blank" rel="noopener">谷雨同学的知乎回答</a>。</p><p>以上操作的特点是，都发生了“在内存中<strong>开辟了一块新的空间</strong>，需要用一个同类对象初始化它”的事件，而在<strong>赋值</strong>操作中，赋值号左侧的左值<strong>并不是一块新的空间</strong>，因此并不调用复制构造函数。另一种理解是，<em>赋值操作过程中不涉及初始化</em> ——而构造函数本质上都是在做初始化操作。</p><h3 id="析构函数" tabindex="-1">析构函数</h3><p>通常情况下（比如，排除 <code>new</code> 分配的空间没有用 <code>delete</code> 释放的情况），每次调用构造函数，在将来的某个时间点都会发生一次对应的析构。注意，这里的构造函数包括<strong>所有种类的构造函数</strong>：无参构造函数、类型转换构造函数、复制构造函数、移动构造函数等。</p><pre><code class="language-cpp"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#5e81ac;font-weight:700">#</span><span style="color:#81a1c1">include</span><span style="color:#5e81ac"> </span><span style="color:#eceff4">&lt;</span><span style="color:#a3be8c">iostream</span><span style="color:#eceff4">&gt;</span></span>
<span class="line"><span style="color:#81a1c1">using</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">namespace</span><span style="color:#d8dEE9FF"> std</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#81a1c1">class</span><span style="color:#d8dEE9FF"> </span><span style="color:#8fbcbb">A</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{</span></span>
<span class="line"><span style="color:#81a1c1">public</span><span style="color:#eceff4">:</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> n</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#88c0d0">A</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">const</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">a</span><span style="color:#eceff4">):</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">n</span><span style="color:#eceff4">(</span><span style="color:#d8dEE9FF">a</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{</span></span>
<span class="line"><span style="color:#d8dEE9FF">        cout</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">int, </span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF">n</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">, @</span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;this&lt;&lt;</span><span style="color:#d8dEE9FF">endl</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#eceff4">}</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#88c0d0">A</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">const</span><span style="color:#d8dEE9FF"> A</span><span style="color:#81a1c1">&amp;</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">a</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{</span></span>
<span class="line"><span style="color:#d8dEE9FF">        cout</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">&amp;,&lt;-</span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dee9">a</span><span style="color:#eceff4">.</span><span style="color:#d8dee9">n</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">,-&gt;@</span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;this&lt;&lt;</span><span style="color:#d8dEE9FF">endl</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">        n</span><span style="color:#81a1c1">=</span><span style="color:#d8dee9">a</span><span style="color:#eceff4">.</span><span style="color:#d8dee9">n</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#eceff4">}</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#88c0d0">~A</span><span style="color:#eceff4">(){</span><span style="color:#d8dEE9FF"> cout</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">~, </span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF">n</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">, @</span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;this&lt;&lt;</span><span style="color:#d8dEE9FF">endl</span><span style="color:#81a1c1">;</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">}</span></span>
<span class="line"><span style="color:#d8dEE9FF">    A</span><span style="color:#81a1c1">&amp;</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">operator</span><span style="color:#d8dEE9FF">=</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">const</span><span style="color:#d8dEE9FF"> A</span><span style="color:#81a1c1">&amp;</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">a</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#eceff4">{</span></span>
<span class="line"><span style="color:#d8dEE9FF">        cout</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">=, </span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF">n</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c"> &lt;- </span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dee9">a</span><span style="color:#eceff4">.</span><span style="color:#d8dee9">n</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">, -&gt;@</span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;this&lt;&lt;</span><span style="color:#d8dEE9FF">endl</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">        n </span><span style="color:#81a1c1">=</span><span style="color:#d8dEE9FF"> </span><span style="color:#d8dee9">a</span><span style="color:#eceff4">.</span><span style="color:#d8dee9">n</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">        </span><span style="color:#81a1c1">return</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">*this;</span></span>
<span class="line"><span style="color:#d8dEE9FF">    </span><span style="color:#eceff4">}</span></span>
<span class="line"><span style="color:#eceff4">}</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#81a1c1">int</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">main</span><span style="color:#eceff4">(){</span></span>
<span class="line"><span style="color:#d8dEE9FF">    A a</span><span style="color:#eceff4">{</span><span style="color:#b48ead">12</span><span style="color:#eceff4">}</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">    cout</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">--1--</span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF">endl</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">    a </span><span style="color:#81a1c1">=</span><span style="color:#d8dEE9FF"> </span><span style="color:#b48ead">9</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">    cout</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#eceff4">"</span><span style="color:#a3be8c">--2--</span><span style="color:#eceff4">"</span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF">endl</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#eceff4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616e88">/*</span></span>
<span class="line"><span style="color:#616e88">int, 12, @0x64fe08 // 类型转换构造函数</span></span>
<span class="line"><span style="color:#616e88">--1--</span></span>
<span class="line"><span style="color:#616e88">int, 9, @0x64fe0c // 隐式类型转换</span></span>
<span class="line"><span style="color:#616e88">=, 12 &lt;- 9, @0x64fe08 // 赋值</span></span>
<span class="line"><span style="color:#616e88">~, 9, @0x64fe0c // 临时对象析构</span></span>
<span class="line"><span style="color:#616e88">--2--</span></span>
<span class="line"><span style="color:#616e88">~, 9, @0x64fe08 // a 析构</span></span>
<span class="line"><span style="color:#616e88">*/</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code><span class="line"><span style="color:#cf222e">#include</span><span style="color:#24292f"> </span><span style="color:#0a3069">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#cf222e">using</span><span style="color:#24292f"> </span><span style="color:#cf222e">namespace</span><span style="color:#24292f"> </span><span style="color:#953800">std</span><span style="color:#24292f">;</span></span>
<span class="line"><span style="color:#cf222e">class</span><span style="color:#24292f"> </span><span style="color:#953800">A</span><span style="color:#24292f"> {</span></span>
<span class="line"><span style="color:#cf222e">public:</span></span>
<span class="line"><span style="color:#24292f">    </span><span style="color:#cf222e">int</span><span style="color:#24292f"> n;</span></span>
<span class="line"><span style="color:#24292f">    </span><span style="color:#8250df">A</span><span style="color:#24292f">(</span><span style="color:#cf222e">const</span><span style="color:#24292f"> </span><span style="color:#cf222e">int</span><span style="color:#24292f"> </span><span style="color:#953800">a</span><span style="color:#24292f">): </span><span style="color:#8250df">n</span><span style="color:#24292f">(a) {</span></span>
<span class="line"><span style="color:#24292f">        cout</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">"int, "</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">n</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">", @"</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0550ae">this</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">endl;</span></span>
<span class="line"><span style="color:#24292f">    }</span></span>
<span class="line"><span style="color:#24292f">    </span><span style="color:#8250df">A</span><span style="color:#24292f">(</span><span style="color:#cf222e">const</span><span style="color:#24292f"> </span><span style="color:#953800">A</span><span style="color:#cf222e">&amp;</span><span style="color:#24292f"> </span><span style="color:#953800">a</span><span style="color:#24292f">) {</span></span>
<span class="line"><span style="color:#24292f">        cout</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">"&amp;,&lt;-"</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">a.n</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">",-&gt;@"</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0550ae">this</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">endl;</span></span>
<span class="line"><span style="color:#24292f">        n</span><span style="color:#cf222e">=</span><span style="color:#24292f">a.n;</span></span>
<span class="line"><span style="color:#24292f">    }</span></span>
<span class="line"><span style="color:#24292f">    </span><span style="color:#8250df">~A</span><span style="color:#24292f">(){ cout</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">"~, "</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">n</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">", @"</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0550ae">this</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">endl; }</span></span>
<span class="line"><span style="color:#24292f">    </span><span style="color:#953800">A</span><span style="color:#cf222e">&amp;</span><span style="color:#24292f"> </span><span style="color:#cf222e">operator</span><span style="color:#953800">=</span><span style="color:#24292f">(</span><span style="color:#cf222e">const</span><span style="color:#24292f"> </span><span style="color:#953800">A</span><span style="color:#cf222e">&amp;</span><span style="color:#24292f"> </span><span style="color:#953800">a</span><span style="color:#24292f">) {</span></span>
<span class="line"><span style="color:#24292f">        cout</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">"=, "</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">n</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">" &lt;- "</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">a.n</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">", -&gt;@"</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0550ae">this</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">endl;</span></span>
<span class="line"><span style="color:#24292f">        n </span><span style="color:#cf222e">=</span><span style="color:#24292f"> a.n;</span></span>
<span class="line"><span style="color:#24292f">        </span><span style="color:#cf222e">return</span><span style="color:#24292f"> </span><span style="color:#cf222e">*</span><span style="color:#0550ae">this</span><span style="color:#24292f">;</span></span>
<span class="line"><span style="color:#24292f">    }</span></span>
<span class="line"><span style="color:#24292f">};</span></span>
<span class="line"><span style="color:#cf222e">int</span><span style="color:#24292f"> </span><span style="color:#8250df">main</span><span style="color:#24292f">(){</span></span>
<span class="line"><span style="color:#24292f">    A a{</span><span style="color:#0550ae">12</span><span style="color:#24292f">};</span></span>
<span class="line"><span style="color:#24292f">    cout</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">"--1--"</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">endl;</span></span>
<span class="line"><span style="color:#24292f">    a </span><span style="color:#cf222e">=</span><span style="color:#24292f"> </span><span style="color:#0550ae">9</span><span style="color:#24292f">;</span></span>
<span class="line"><span style="color:#24292f">    cout</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#0a3069">"--2--"</span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f">endl;</span></span>
<span class="line"><span style="color:#24292f">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6e7781">/*</span></span>
<span class="line"><span style="color:#6e7781">int, 12, @0x64fe08 // 类型转换构造函数</span></span>
<span class="line"><span style="color:#6e7781">--1--</span></span>
<span class="line"><span style="color:#6e7781">int, 9, @0x64fe0c // 隐式类型转换</span></span>
<span class="line"><span style="color:#6e7781">=, 12 &lt;- 9, @0x64fe08 // 赋值</span></span>
<span class="line"><span style="color:#6e7781">~, 9, @0x64fe0c // 临时对象析构</span></span>
<span class="line"><span style="color:#6e7781">--2--</span></span>
<span class="line"><span style="color:#6e7781">~, 9, @0x64fe08 // a 析构</span></span>
<span class="line"><span style="color:#6e7781">*/</span></span>
<span class="line"></span></code></pre></div></code></pre><hr class="talk-separator"><h2 id="移动" tabindex="-1">移动</h2><p>复制构造函数中执行开销极大的深拷贝操作，而有时我们只是想把值从变量传到另外一个变量，之后<strong>丢弃</strong>原变量，这时不必进行拷贝，可以使用<strong>移动</strong>操作。</p><pre><code class="language-cpp"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#d8dEE9FF">vector</span><span style="color:#81a1c1">&lt;int&gt;</span><span style="color:#d8dEE9FF"> a</span><span style="color:#eceff4">{</span><span style="color:#b48ead">1</span><span style="color:#eceff4">}</span><span style="color:#81a1c1">;</span></span>
<span class="line"><span style="color:#d8dEE9FF">vector</span><span style="color:#81a1c1">&lt;int&gt;</span><span style="color:#d8dEE9FF"> b</span><span style="color:#eceff4">{</span><span style="color:#d8dEE9FF">std</span><span style="color:#eceff4">::</span><span style="color:#88c0d0">move</span><span style="color:#eceff4">(</span><span style="color:#d8dEE9FF">a</span><span style="color:#eceff4">)}</span><span style="color:#81a1c1">;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code><span class="line"><span style="color:#24292f">vector</span><span style="color:#cf222e">&lt;int&gt;</span><span style="color:#24292f"> a{</span><span style="color:#0550ae">1</span><span style="color:#24292f">};</span></span>
<span class="line"><span style="color:#24292f">vector</span><span style="color:#cf222e">&lt;int&gt;</span><span style="color:#24292f"> b{</span><span style="color:#953800">std</span><span style="color:#24292f">::</span><span style="color:#8250df">move</span><span style="color:#24292f">(a)};</span></span>
<span class="line"></span></code></pre></div></code></pre><p><code>std::move()</code> 标注该左值为“可移动的”，即<em>亡值</em> （可以理解为丧失其值的所有权）。亡值会优先绑定到右值引用类型上，因此会优先调用<strong>移动构造函数</strong>和<strong>移动赋值运算符</strong>。</p><p><code>std::move()</code> 本质上只是类型转换，表示可以进行移动操作，<strong>不一定实际移动了</strong>（实际移动操作在构造函数和运算符重载中进行）。之后该左值是<strong>合法</strong>但<strong>未定义</strong>的。</p><p>移动构造函数和移动赋值运算符的参数是右值引用类型（<code>T&amp;&amp;</code>），注意没有 <code>const</code> 修饰符，因为移动操作会修改右值引用。</p><p>举例来说，在类初始化列表中初始化成员对象时，使用 <code>std::move</code> 移动形参对象可以减少开销。</p><hr class="talk-separator"><h2 id="内联函数" tabindex="-1">内联函数</h2><p>无论是显式声明 <code>inline</code> 还是隐式（成员函数函数体直接写在类定义内），编译器都<strong>不一定将其内联</strong>。经试验，<code>gcc</code> 在 <code>-O0</code> 下 <em>似乎</em> 不会执行内联，而在 <code>-O1</code> 下则 <em>似乎</em> 会——断点调试器中找不到显示或隐式函数了。<s>所以内联就是安慰剂</s>。</p><p>成员函数即使内联，也<strong>不会计入实例化的对象的存储空间</strong>。</p><hr class="talk-separator"><h2 id="输入输出流" tabindex="-1">输入输出流</h2><h3 id="cstdio-还是-iostream" tabindex="-1"><code>&lt;cstdio&gt;</code> 还是 <code>&lt;iostream&gt;</code> ？</h3><p><code>scanf</code> 和 <code>printf</code> 虽然性能好，但毕竟是 C 库函数，有几处和 C++ 习惯不符：</p><ol><li><code>scanf</code> 通过<strong>指针</strong>进行写入，忘记取地址符 <code>&amp;</code> 会变得不幸😅。</li><li>这两个函数并不支持 <code>string</code>（<code>string</code> 并没定义到 <code>char*</code> 的隐式类型转换），需要手动调用 <code>.c_str()</code>。</li><li><code>scanf("%c",...)</code> 会把<strong>空白字符</strong>读入 <code>char</code>，而 <code>cin</code> 会跳过所有空白字符。如果缓冲区里还留着上一行的换行符，它会被读入 <code>char</code>。可以使用 <code>" %c"</code> ，跳过缓冲区里<strong>所有空白字符</strong>。</li></ol><p>输入数据量特别大的情况下，可以考虑用 <code>scanf</code>。而 <code>cin</code> 慢与它和 <code>scanf</code> 同步缓冲区有关，可以使用 (<code>std::</code>)<code>ios::sync_with_stdio(false)</code> 关闭，之后性能和 <code>scanf</code> 差不多，但<strong>不再支持两个函数混用</strong>。</p><p><code>cin</code> 还有一个坑，读取之后，后接的<strong>空白字符留在缓冲区</strong>里，包括<code>cin.getline()</code>。这时候再用 <code>scanf</code> 就可能出现混乱。</p><p>另外，<code>&lt;cstdio&gt;</code> 读入一个字符的函数是 <code>getchar()</code>，而 <code>&lt;iostream&gt;</code> 是 <code>cin.get()</code>，丢弃字符可以直接使用 <code>cin.ignore()</code>。</p><h3 id="格式化" tabindex="-1">格式化</h3><p><code>printf</code> 用来保留三位小数的语法是 <code>"%.3f"</code>，而 <code>cout</code> 需要用 <code>&lt;iomanip&gt;</code> 库：</p><pre><code class="language-cpp"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#2e3440ff"><code><span class="line"><span style="color:#d8dEE9FF">cout </span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">setiosflags</span><span style="color:#eceff4">(</span><span style="color:#d8dEE9FF">ios</span><span style="color:#eceff4">::</span><span style="color:#d8dEE9FF">fixed</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">setprecision</span><span style="color:#eceff4">(</span><span style="color:#b48ead">3</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF"> MY_DOUBLE </span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF"> </span><span style="color:#88c0d0">resetiosflags</span><span style="color:#eceff4">(</span><span style="color:#d8dEE9FF">ios</span><span style="color:#eceff4">::</span><span style="color:#d8dEE9FF">fixed</span><span style="color:#eceff4">)</span><span style="color:#d8dEE9FF"> </span><span style="color:#81a1c1">&lt;&lt;</span><span style="color:#d8dEE9FF"> endl</span><span style="color:#81a1c1">;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code><span class="line"><span style="color:#24292f">cout </span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f"> </span><span style="color:#8250df">setiosflags</span><span style="color:#24292f">(</span><span style="color:#953800">ios</span><span style="color:#24292f">::fixed) </span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f"> </span><span style="color:#8250df">setprecision</span><span style="color:#24292f">(</span><span style="color:#0550ae">3</span><span style="color:#24292f">) </span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f"> MY_DOUBLE </span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f"> </span><span style="color:#8250df">resetiosflags</span><span style="color:#24292f">(</span><span style="color:#953800">ios</span><span style="color:#24292f">::fixed) </span><span style="color:#cf222e">&lt;&lt;</span><span style="color:#24292f"> endl;</span></span>
<span class="line"></span></code></pre></div></code></pre><p>输出十六进制可以使用 <code>%x</code> 或者 <code>cout &lt;&lt; hex &lt;&lt; MY_INT</code>。</p></div></section><!--]--></article></main></main><!----><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{}}'</script><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("color-schema")||"auto";("dark"===a||e&&"light"!==a)&&document.documentElement.classList.toggle("dark",!0)}()</script><link rel="stylesheet" href="/assets/app.c495ff01.css"><link rel="stylesheet" href="/assets/cpp-practice-of-programming.9021f1c0.css"><link rel="stylesheet" href="/assets/TheArticle.25f0d059.css"></body></html>