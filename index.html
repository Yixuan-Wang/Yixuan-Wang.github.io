<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/pwa-192x192.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00aba9">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
  <div id="app"></div>
  <script>
    (function () {
      const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches
      const setting = localStorage.getItem("color-scheme") || "auto"
      if (setting === "dark" || (prefersDark && setting !== "light"))
        document.documentElement.className = "dark";
      else
        document.documentElement.className = "";

      const colors = localStorage.getItem("typesetting::accent_color");
      if (colors) {
        let colorsMap = JSON.parse(colors);
        const vars = Object.entries(colorsMap).map(color => `--accent-${color[0]}: ${color[1]};`).join("\n");
        let colorStyleNode = document.createElement("style");
        colorStyleNode.type = "text/css";
        colorStyleNode.innerText = `:root{${vars}}`;
        document.head.appendChild(colorStyleNode);
      }
    })()
  </script>
  <script type="module" src="/src/main.ts"></script>
</body>

</html>